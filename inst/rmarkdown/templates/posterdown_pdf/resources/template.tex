%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% %%	Posterdown PDF class for LaTeX files	 08-JAN-2019
%% %%	For any information please send an e-mail to:
%% %%		brentthonre18@gmail.com (Brent Thorne)
%% %%
%% %%	Initial class provided by:
%% %%		Brent Thorne
%% %% Contributors: Shea Connell (SC)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[article,$font_size$,extrafontsizes]{memoir}

%utf-8 seems to be important
\RequirePackage[utf8]{inputenc}
\RequirePackage[T1]{fontenc}
\RequirePackage{lmodern}
\RequirePackage{multicol}
\RequirePackage{graphicx}
\RequirePackage{lipsum}
\RequirePackage{blindtext}
\RequirePackage[svgnames,table]{xcolor}
\RequirePackage{tikz}
\RequirePackage[framemethod=tikz]{mdframed}
\RequirePackage{color}
\RequirePackage{geometry}
\RequirePackage{adjmulticol}
\RequirePackage[skins,most,listings,skins]{tcolorbox}


%For kable extra package :)
\RequirePackage{booktabs}
\RequirePackage{longtable}
\RequirePackage{array}
\RequirePackage{multirow}
\RequirePackage{wrapfig}
\RequirePackage{float}
\RequirePackage{colortbl}
\RequirePackage{pdflscape}
\RequirePackage{pagecolor}
\RequirePackage{tabu}
\RequirePackage{threeparttable}
\RequirePackage{threeparttablex}
\RequirePackage[normalem]{ulem}
\RequirePackage{makecell}
\RequirePackage{wrapfig}

%%%%%%%%% COLOURS %%%%%%%%

%Fill/ Line Colours
\definecolor{titlebgcol}{HTML}{$title_bgcol$}
\definecolor{columnlinecol}{HTML}{$columnline_col$}
\definecolor{posterbgcol}{HTML}{$poster_bgcol$}
\definecolor{headerbgcol}{HTML}{$header_bgcol$}
\definecolor{headerbordercol}{HTML}{$header_bordercol$}

% Text Colours
\definecolor{titletextcol}{HTML}{$title_textcol$}
\definecolor{authortextcol}{HTML}{$author_textcol$}
\definecolor{affiliationtextcol}{HTML}{$affiliation_textcol$}
\definecolor{headertextcol}{HTML}{$header_textcol$}
\definecolor{bodytextcol}{HTML}{$body_textcol$}
\definecolor{footnotetextcol}{HTML}{$footnote_textcol$}
\definecolor{citecol}{HTML}{$cite_col$}
\definecolor{urlcol}{HTML}{$url_col$}
\definecolor{linkcol}{HTML}{$link_col$}

\RequirePackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=linkcol,
    citecolor=citecol,
    filecolor=magenta,
    urlcolor=urlcol,
}

%For figure and table placement
\RequirePackage{float}
\floatplacement{figure}{H}
\floatplacement{table}{H}

%spacing between figure/ table and caption
\setlength{\abovecaptionskip}{0.4in}
\setlength{\belowcaptionskip}{0.2in}
\captionnamefont{\footnotesize\sffamily\bfseries}
\captiontitlefont{\footnotesize\sffamily}

%define column options
\setlength{\columnseprule}{1pt}
\def\columnseprulecolor{\color{columnlinecol}}

%define section header title features
\setsubsubsecheadstyle{\small\color{headertextcol}\textbf}% Set \section style
\setsecnumformat{}
\def\sectionmark#1{\markboth{#1}{#1}}


%tcolorbox magic from my stack exchange question
\newtcolorbox{myboxstuff}[1][]{code={\parindent=0em},colframe=headerbordercol,left skip=0pt,valign=center,halign=center,fontupper=\Large\bfseries,colupper=headertextcol,boxrule=$header_borderwidth$,$header_boxshape$,colback=headerbgcol, #1}
\newcommand{\mybox}[1]{%
\begin{myboxstuff}
\strut #1
\end{myboxstuff}%
}
\makeheadstyles{MyBox}{
    \setsecheadstyle{\mybox}
}
\headstyles{MyBox}\makepagestyle{MyBox}


%-----------------------------------------------------

\thispagestyle{empty}
\definecolor{light-gray}{gray}{0.9}

%biblatex options
\RequirePackage[sorting=none,backend=biber]{biblatex}
\renewcommand*{\bibfont}{\$bibliography_textsize$} %% SC
\bibliography{$bibliography$}
\defbibheading{bibliography}[\bibname]{%
\setlength\bibitemsep{$bibliography_spacing$\itemsep} %% SC
\section*{#1}%
\markboth{#1}{#1}}
\AtBeginDocument{%
  \renewcommand{\bibname}{References}
}

%bring in the users information
\author{$author$}
\title{$title$}
\counterwithout{section}{chapter}


\makechapterstyle{mydefault}{
\addtocounter{secnumdepth}{2}
\setsecheadstyle{\mybox}
\setsubsecheadstyle{\itshape}
\setsubsubsecheadstyle{\itshape}
}

\chapterstyle{mydefault}

%define column spacing
\setlength\columnsep{1in}

\setlength\parindent{1em}
\setlength\parskip{1em}
\setlength\hangparas{0}

%spacing after section head title
\setaftersecskip{0.3in}
\setbeforesecskip{1in}
\setlength\textfloatsep{0.3in}
\setlength\floatsep{0.3in}
\setlength\intextsep{0.3in}

\setstocksize{$poster_height$}{$poster_width$}
\settrimmedsize{\stockheight}{\stockwidth}{*}
\settypeblocksize{$poster_height$}{$poster_width$}{*}
\setlrmargins{*}{*}{1}
\setulmarginsandblock{2.5cm}{*}{*}
\setmarginnotes{0em}{0cm}{0cm}
\setlength{\footskip}{0cm}
\setlength{\footnotesep}{0cm}
\setlength{\headheight}{0pt}
\setlength{\headsep}{0pt}
\setlength{\trimtop}{0pt}
\setlength{\trimedge}{0pt}
\setlength{\uppermargin}{0pt}
\checkandfixthelayout

\mdfdefinestyle{brentsmdfstyle}{%
  backgroundcolor=titlebgcol,
  linecolor=columnlinecol,
  topline=false,
  leftline=false,
  rightline=false,
  linewidth=2mm}

%Footnote to white
\RequirePackage{footmisc}
\def\footnotelayout{\centering\color{footnotetextcol}}

% see https://stackoverflow.com/a/47122900
$if(highlighting-macros)$
$highlighting-macros$
$endif$

% choose font family
\RequirePackage{$font_family$}

\newpagecolor{posterbgcol}

%sets footnote to be white hopefully
\renewcommand\footnoterule{}
\renewcommand{\thempfootnote}{\footnotesize\color{footnotetextcol}{\arabic{mpfootnote}}}


%top title box
\newtcolorbox{topbox}{
enhanced,
colback=titlebgcol,
colframe=red,
halign=center,
sharp corners,
 overlay={
    \node[anchor=south west]
      at ([xshift=1in,yshift=0.6\baselineskip]frame.south west)
       {\includegraphics[width=15pc]{Figures/posterdownlogo}};}
}

% -------------- begin the document ----------------- %
\begin{document}

% -------------- Top Section Start ------------------ %

%tcolorbox allows for pictures hopefully
\begin{topbox}
  \color{titletextcol}
  \vspace{0.5in}
  \$title_textsize${$title$}  \\[0.3in]  %% SC
  \color{authortextcol} \$author_textsize${$author$} \\[0.2in] %% SC
  \color{affiliationtextcol} \$affiliation_textsize${$affiliation$} %% SC
  \vspace{0.5in}
\end{topbox}

% ---------------- Top Section End ------------------%


% Begin body of poster
\begin{adjmulticols*}{$column_numbers$}{10mm}{10mm}
\$body_textsize${  %% SC
\color{bodytextcol}
$body$
}
\end{adjmulticols*}
%end the poster
\end{document}
